{
  "version": 3,
  "sources": ["../../actions/yt.ts"],
  "sourcesContent": ["const axios = require(\"axios\");\nimport * as fs from 'fs'\nimport { Api, TelegramClient } from 'telegram';\nimport { CustomFile } from 'telegram/client/uploads';\nimport { NewMessageEvent } from 'telegram/events';\nimport Chk from '../helpers/chk';\n\nasync function getVideoInfo(videoUrl: any) {\n  const response = await axios.get(\"https://ytdl.panditsiddharth.repl.co/dl\", {\n    params: {\n      url: videoUrl\n    }\n  });\n  return response.data;\n}\n\nconst yt = async (client: TelegramClient, e: NewMessageEvent) => {\n  const y = new Chk(client, e)\n  const m: Api.Message = e.message\n  let rid: any = await y.edit(\"Your Link found and processing..\", { d: false });\n\n  const videoUrl: any = \"https://www.youtube.com/watch?v=JGwWNGJdvx8=9s\";\n  const yturl: any = (m.message as any).substring(4)\n  console.log(yturl)\n  try {\n    await getVideoInfo(yturl).then(async (data) => {\n      await y.edit('wait i am sending video ', { id: rid.id, d: false })\n      let res = \"720p\"\n      if(m.isPrivate)\n        res = \"720p\"\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].url && data[i].fps != false && data[i].aud == true && data[i].fps > 24 && data[i].res == res) {\n  console.log(data[i])\n          try{\n          await fs.unlinkSync('./actions/video.mp4')\n        }catch(err: any){\n          console.error(err.message)\n        }\n          await y.edit(\"Fetch completed Now downloading\", { id: rid.id, d: false });\n          await downloadVideo(data[i].url, './actions/video.mp4', y, rid)\n          await console.log('Video downloaded')\n          let l: any = await y.edit('Download completed now sending here..', { id: rid.id, d: false})\n          try {\n            // await client.sendFile(await y.chat(), { file: './actions/video.mp4', })\n                        let file = await client.uploadFile({\n             file: new CustomFile(\"video.mp4\", fs.statSync(\"./actions/video.mp4\").size, \"./actions/video.mp4\"),\n             workers: 16,\n             });\n\n            \n             await client.sendFile(await y.chat(), {file: file,  caption: \"Downloaded video[\" + data[i].res + \"]: \" + data[0].title + \"\\n\\n     ~Powered by Logic.B\", videoNote: true})\n\n            console.log(file)\n            \n// const file = await client.uploadFile({\n  // file: \"./actions/video.mp4\" as any,\n   //workers: 10,\n //});\n            client.deleteMessages(await y.chat(), [l.id], {revoke: false})\n            // await y.send(\"Downloaded video[\" + data[i].res + \"]: \" + data[0].title + \"\\n\\n     ~Powered by Logic.B\")\n          } catch (err: any) {\n            y.edit(err.message)\n          }\n        }\n      }\n    })\n      .catch((err: any) => { y.edit(err.message) })\n  } catch (error: any) {\n    await y.edit('Error on download: ' + error.message)\n\n  }\n}\n\nexport default yt\n\nasync function downloadVideo(url: any, path: any, y: any, rid: any) {\n  const response = await axios({\n    url,\n    method: 'GET',\n    responseType: 'stream'\n  });\n  await y.edit('25% process completed', { d: false, id: rid.id })\n  await console.log(\"25% process complete\")\n  response.data.pipe(fs.createWriteStream(path));\n\n  return new Promise((resolve: any, reject: any) => {\n    response.data.on('end', () => {\n      resolve();\n    });\n    response.data.on('error', (error: any) => {\n      reject(error);\n    });\n  });\n}\n\n"],
  "mappings": "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",
  "names": ["Chk"]
}
